<project name="AGE" default="main" basedir=".">

	<target name="main" depends="uninstall,tools,haxelibInstall,clean" />
	
	<target name="uninstall">
		<echo message="Uninstall AGE from haxelib" />
		<exec executable="haxelib">
			<arg line="remove AGE" />
		</exec>
	</target>
	
	<target name="tools">
		<echo message="Build ProjectCreator" />
		<exec executable="haxe" dir="ProjectCreator">
			<arg line="build.hxml" />
		</exec>
	</target>
	
	<target name="haxelibInstall">
		<echo message="Install to haxelib" />
		<zip destfile="template.zip" basedir="templates" useLanguageEncodingFlag="false" />
		<zip destfile="age.zip" useLanguageEncodingFlag="false">
			<zipfileset dir="." includes="run.n,haxelib.xml,template.zip,CHANGELOG,LICENSE" />
			<zipfileset dir="src" />
		</zip>
		<exec executable="haxelib" dir=".">
			<arg line="test age.zip" />
		</exec>
	</target>
	
	<target name="clean">
		<echo message="Clean age directory" />
		<delete quiet="true">
			<fileset dir="." includes="*.n,*.zip" />
		</delete>
	</target>
	
</project>